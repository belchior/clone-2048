(this["webpackJsonpclone-2048"]=this["webpackJsonpclone-2048"]||[]).push([[0],[,,,,,function(e,t,a){e.exports=a.p+"static/media/clone-2048.67712dff.svg"},,,,,,,function(e,t,a){e.exports=a.p+"static/media/icon-hamburger-menu.cd8e0b5c.svg"},function(e,t,a){e.exports=a.p+"static/media/icon-github.79531950.svg"},,function(e,t,a){e.exports=a(34)},,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(4),c=a.n(o),l=a(2);const s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>console.error("Error during service worker registration:",e))}var u=a(3);const m=()=>{const e=localStorage.getItem("state");return e?JSON.parse(e):void 0},d=e=>{const t=JSON.stringify(e);localStorage.setItem("state",t)};var p=a(1);const h=e=>t=>t.indexOf(e)>=0,b=e=>e.reduce((e,t)=>[].concat(e,t),[]),f=e=>E(e)?void 0:e[0];function E(e){return Array.isArray(e)&&0===e.length}const g=e=>e[e.length-1];function y(e){if(e.length<2)return[];const t=f(e),a=f(S(e));return t===a?[[t,a],...y(S(S(e)))]:y(S(e))}const N=(...e)=>t=>e.reduce((e,t)=>t(e),t),v=e=>{const t=(a=0,e=>e.reduce((e,t,r)=>t===a?e.concat(r):e,[]))(e);var a;if(!t.length)return e;const r=t[w(t.length)],n=[...e];return n[r]=w(8)>=6?4:2,n};function w(e){return Math.floor(Math.random()*e)}const O=e=>e.filter(Boolean),k=e=>e.reverse();function A(e){if(e.length<2)return e;const t=f(e),a=f(S(e));return t===a?[t+a,...A(S(S(e)))]:[t,...A(S(e))]}const M=e=>N(k,A,k)(e);function S(e){return e.slice(1)}function L(e){return e.reduce((t,a,r)=>r%4===0?[...t,e.slice(r,r+4)]:t,[])}const x=e=>e[0].map((t,a)=>e.map(e=>e[a])),j={bestScore:0,hardMode:!1,history:[],maxBlock:2048,moveError:!1,rollback:2,score:0,status:"PLAYING",wall:[],welcomeWall:[2,4,8,16,4096,0,0,32,2048,0,0,64,1024,512,256,128]},C=e=>Object(p.a)(Object(p.a)({},e),{},{bestScore:e.score>e.bestScore?e.score:e.bestScore}),R=(e,t)=>N(C,(e=>t=>{const a=g(e.history);return Object(p.a)(Object(p.a)({},t),{},{history:a?[a,e.wall]:[e.wall]})})(e))(t),T=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,P=Object(u.d)((e=(()=>Object(p.a)(Object(p.a)({},j),{},{status:"WELCOME"}))(),t)=>{switch(t.type){case"LOAD":return(e=>Object(p.a)(Object(p.a)({},m()),e))(e);case"MOVIMENT":return R(e,t.payload);case"MOVE_ERROR":return((e,t)=>Object(p.a)(Object(p.a)({},e),{},{moveError:t}))(e,t.payload);case"PLAYER_LOSE":return(e=>Object(p.a)(Object(p.a)({},e),{},{status:"PLAYER_LOSE"}))(e);case"PLAYER_WON":return(e=>Object(p.a)(Object(p.a)({},e),{},{status:"PLAYER_WON"}))(e);case"RESTART":return(e=>Object(p.a)(Object(p.a)({},j),{},{bestScore:e.bestScore,history:[],status:"PLAYING",wall:v(v(Array(16).fill(0)))}))(e);case"ROLLBACK":return(e=>e.history.length<=0||e.rollback<=0?e:Object(p.a)(Object(p.a)({},e),{},{history:S(k(e.history)),rollback:Math.max(e.rollback-1,0),wall:g(e.history)}))(e);case"SAVE":return(e=>(d(e),e))(e);case"START":return(e=>Object(p.a)(Object(p.a)({},e),{},{history:[],status:"PLAYING",wall:v(v(Array(16).fill(0)))}))(e);case"TOGGLE_HARDMODE":return(e=>Object(p.a)(Object(p.a)({},e),{},{hardMode:!e.hardMode}))(e);default:return e}},m(),T(Object(u.a)(({getState:e})=>t=>a=>(d(e()),t(a)))));var W=a(14);const _={alt:["Alt",1,2],"alt-left":["Alt",1],"alt-right":["Alt",2],"caps-lock":["CapsLock",0],ctrl:["Control",1,2],"ctrl-left":["Control",1],"ctrl-right":["Control",2],meta:["Meta",1,2],"meta-left":["Meta",1],"meta-right":["Meta",2],numlock:["NumLock",0],shift:["Shift",1,2],"shift-left":["Shift",1],"shift-right":["Shift",2],enter:["Enter",0],tab:["Tab",0],"arrow-down":["ArrowDown","Down",0],"arrow-left":["ArrowLeft","Left",0],"arrow-right":["ArrowRight","Right",0],"arrow-up":["ArrowUp","Up",0],end:["End",0],home:["Home",0],insert:["Insert",0],"page-down":["PageDown",0],"page-up":["PageUp",0],"pause ":["Pause",0],"print-screen":["PrintScreen",0],"scroll-lock ":["ScrollLock",0],backspace:["Backspace",0],clear:["Clear",0],copy:["Copy",0],cut:["Cut",0],delete:["Delete",0],paste:["Paste",0],redo:["Redo",0],undo:["Undo",0],a:["a","A",0],b:["b","B",0],c:["c","C",0],d:["d","D",0],e:["e","E",0],f:["f","F",0],g:["g","G",0],h:["h","H",0],i:["i","I",0],j:["j","J",0],k:["k","K",0],l:["l","L",0],m:["m","M",0],n:["n","N",0],o:["o","O",0],p:["p","P",0],q:["q","Q",0],r:["r","R",0],s:["s","S",0],t:["t","T",0],u:["u","U",0],v:["v","V",0],w:["w","W",0],x:["x","X",0],y:["y","Y",0],z:["z","Z",0],0:["0","Numpad0",0],1:["1","Numpad1",0],2:["2","Numpad2",0],3:["3","Numpad3",0],4:["4","Numpad4",0],5:["5","Numpad5",0],6:["6","Numpad6",0],7:["7","Numpad7",0],8:["8","Numpad8",0],9:["9","Numpad9",0],backquote:["'",0],"bracket-left":["BracketLeft",0],"bracket-right":["BracketRight",0],comma:[",",0],equal:["=",0],backslash:["\\",0],minus:["-",0],period:[".",0],semicolon:[";",0],slash:["/",0],space:[" ",0],"num-lock":["NumLock",0],"numpad-0":["Numpad0",0],"numpad-1":["Numpad1",0],"numpad-2":["Numpad2",0],"numpad-3":["Numpad3",0],"numpad-4":["Numpad4",0],"numpad-5":["Numpad5",0],"numpad-6":["Numpad6",0],"numpad-7":["Numpad7",0],"numpad-8":["Numpad8",0],"numpad-9":["Numpad9",0],"numpad-backspace":["NumpadBackspace",0],"numpad-comma":["NumpadComma",0],"numpad-decimal":["NumpadDecimal",0],"numpad-divide":["NumpadDivide",0],"numpad-enter":["NumpadEnter",0],"numpad-equal":["NumpadEqual",0],"numpad-multiply":["NumpadMultiply",0],"numpad-subtract":["NumpadSubtract",0],escape:["Escape",0]};function D(e){return-1!==e.search(/alt(?!\x2D(left|right))/i)}function B(e){return-1!==e.search(/ctrl(?!\x2D(left|right))/i)}function Y(e){return-1!==e.search(/meta(?!\x2D(left|right))/i)}function K(e){return-1!==e.search(/[s\u017F]hift(?!\x2D(left|right))/i)}function I(e,t){const a=e.split("+").pop();return t[a]?t[a]:[]}let V=[];const G=e=>{V=e.reduce((e,t)=>{const a=function(e){if("string"!==typeof e)throw new Error("KeyboardEvent: The shortcut must be string");const t=e.toLowerCase().trim();return{altKey:D(t),ctrlKey:B(t),keys:I(t,_),metaKey:Y(t),shiftKey:K(t)}}(t.shortcut);return a.keys.length>0?e.concat(Object(p.a)(Object(p.a)({},t),a)):e},[])},H=e=>{V.filter((e=>t=>t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey&&t.shiftKey===e.shiftKey&&t.keys.indexOf(e.key)>=0&&t.keys.indexOf(e.location)>=0)(e)).map(e=>e.action())},U=(e,t)=>{const a=document.querySelector(t);["HTML","BODY"].indexOf(a.nodeName)>=0&&!a.getAttribute("tabIndex")&&a.setAttribute("tabIndex",-1),a.removeEventListener("keyup",e),a.addEventListener("keyup",e)};class q extends r.Component{componentDidMount(){const e=this.props.targetSelector;e&&U(H,e)}componentDidUpdate(){const e=this.props.targetSelector;e&&U(H,e)}render(){const e=this.props,t=e.shortcuts,a=e.targetSelector,r=e.children;return G(t),a?r:((e,t)=>{if(!e)return;const a=Array.isArray(e)?e:[e];return n.a.Children.map(a,e=>{const a=Object(p.a)(Object(p.a)({},e.props),{},{onKeyUp:t,tabIndex:-1});return n.a.cloneElement(e,a,a.children)})})(r,H)}}q.defaultProps={children:void 0,targetSelector:""};var F=a(6),J=a.n(F);let X,z;const Q=e=>({x:e.clientX,y:e.clientY});function Z(e){return document.body.ontouchstart=e=>{X=Q(e.changedTouches[0])},document.body.ontouchend=t=>{z=Q(t.changedTouches[0]),e.moveTo(((e,t)=>{const a=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);if(!(Math.max(a,r)<=30))return a>r?e.x<t.x?"right":"left":e.y<t.y?"bottom":"top"})(X,z))()},e.children}Z.propTypes={moveTo:J.a.func.isRequired};a(25),a(26);function $(e){const t=e.current,a=void 0===t?0:t,r=e.best,o=void 0===r?0:r;return n.a.createElement("div",{className:"Score"},n.a.createElement("span",{className:"current_score",title:"The current score"},a),n.a.createElement("span",{className:"best_score",title:"The best score"},o))}$.defaultProps={best:0,current:0};a(27);function ee({onClick:e,active:t=!1,label:a="",title:r=a}){return n.a.createElement("label",{className:"btn-toggle-label",htmlFor:"toggleButton"},n.a.createElement("button",{className:"btn-toggle","data-active":t,id:"toggleButton",onClick:e,title:r,type:"button"}),a)}ee.defaultProps={active:!1,label:"",title:""};a(28);function te(e){const t=e.hardMode,a=e.hardModeAction,r=e.restartAction,o=e.rollback,c=e.rollbackAction,l=e.status;return n.a.createElement("div",{className:"Controllers"},n.a.createElement("h2",{className:"subtitle"},"Controls"),n.a.createElement("button",{className:"btn controls-btn_back",disabled:"WELCOME"===l||0===o,onClick:c,title:"Step back",type:"button"},"back (",o,")"),n.a.createElement("button",{className:"btn controls-btn_restart",disabled:"WELCOME"===l,onClick:r,title:"Restart the game",type:"button"},"restart"),n.a.createElement(ee,{active:t,label:"Hard mode",onClick:a,title:"Hard mode"}))}te.defaultProps={hardMode:!1,rollback:0};var ae=Object(l.b)(e=>({hardMode:e.hardMode,rollback:e.rollback,status:e.status}),e=>({hardModeAction:()=>e({type:"TOGGLE_HARDMODE"}),restartAction:()=>e({type:"RESTART"}),rollbackAction:()=>e({type:"ROLLBACK"})}))(te),re=a(12),ne=a.n(re),oe=a(5),ce=a.n(oe),le=a(13),se=a.n(le);class ie extends r.Component{constructor(...e){super(...e),this.state={menuFullVisibility:!1},this.handleVisibility=()=>{this.setState(e=>({menuFullVisibility:!e.menuFullVisibility}))},this.handleStopPropagation=e=>{e.stopPropagation()}}render(){const e=this.props,t=e.bestScore,a=e.score,r=this.state.menuFullVisibility,o="menu_full ".concat(r?"visible":"");return n.a.createElement("aside",{className:"Sidebar"},n.a.createElement("div",{className:"menu_compact"},n.a.createElement("button",{className:"btn-menu",onClick:this.handleVisibility,type:"button"},n.a.createElement("img",{alt:"\xedcone do menu principal",src:ne.a})),n.a.createElement($,{best:t,current:a})),n.a.createElement("div",{className:o,onClick:this.handleVisibility},n.a.createElement("div",{className:"menu_full-container",onClick:this.handleStopPropagation},n.a.createElement("h1",{className:"title"},n.a.createElement("img",{alt:"Logo clone 2048",className:"logo",src:ce.a}),n.a.createElement("span",null,"Clone 2048")),n.a.createElement($,{best:t,current:a}),n.a.createElement(ae,null),n.a.createElement("nav",{className:"list external-links"},n.a.createElement("a",{className:"list-item link-github",href:"https://github.com/belchior/clone-2048"},n.a.createElement("img",{alt:"Logotipo do GitHub",className:"list-item-image",src:se.a}),n.a.createElement("span",{className:"list-item-text"},"Calc no GitHub")),n.a.createElement("a",{className:"list-item",href:"https://github.com/belchior"},n.a.createElement("img",{alt:"Fotografia de Belchior Oliveira",className:"list-item-image",src:"https://avatars0.githubusercontent.com/u/2656585?v=3"}),n.a.createElement("span",{className:"list-item-text"},"Belchior Oliveira"))))))}}var ue=Object(l.b)(e=>({bestScore:e.bestScore,score:e.score}),()=>({}))(ie);a(29);function me({value:e}){return n.a.createElement("div",{className:"Block block-".concat(e)},e)}a(30);function de(e){const t=e.hardMode,a=e.moveError,r=e.wall,o="Wall ".concat(t?"hardMode ":"").concat(a?"moveError ":"");return n.a.createElement("div",{className:o},r.map((e,t)=>n.a.createElement(me,{key:"".concat(t,"-").concat(e),value:e})))}de.defaultProps={hardMode:!1,moveError:!1};var pe=Object(l.b)(e=>({hardMode:e.hardMode,moveError:e.moveError,wall:e.wall}),()=>({}))(de);a(31);function he(e){const t=e.button,a=e.hardMode,r=e.wall;return n.a.createElement("div",{className:"Welcome"},n.a.createElement(de,{hardMode:a,wall:r}),n.a.createElement("button",{className:"WelcomeAction",onClick:t.handleAction,type:"button"},t.text))}he.defaultProps={hardMode:!1};const be=e=>({payload:e,type:"MOVE_ERROR"});var fe=Object(l.b)(e=>({hardMode:e.hardMode,wall:e.welcomeWall}),e=>({button:{handleAction:()=>e({type:"START"}),text:"Start"}}))(he);a(32);function Ee(e){const t=e.bestScore,a=e.button,r=e.hardMode,o=e.score,c=e.title,l=e.wall;return n.a.createElement("section",{className:"Modal"},n.a.createElement(de,{hardMode:r,wall:l}),n.a.createElement("div",{className:"Modal-content"},n.a.createElement("img",{alt:"Logo Clone 2048",className:"logo",src:ce.a}),n.a.createElement("h1",{className:"Modal-title"},c),n.a.createElement($,{best:t,current:o}),n.a.createElement("button",{className:"ModalAction",onClick:a.handleAction,type:"button"},a.text)))}Ee.defaultProps={hardMode:!1};a(33);class ge extends r.Component{renderModal(e,t){const a=this.props,r={bestScore:a.bestScore,button:t,hardMode:a.hardMode,score:a.score,title:e,wall:a.welcomeWall};return n.a.createElement("div",{className:"App no-select"},n.a.createElement(ue,null),n.a.createElement("main",{className:"main"},n.a.createElement(Ee,r)))}renderModalLose(){const e={handleAction:this.props.restartAction,text:"Try Again"};return this.renderModal("You Lose",e)}renderModalWon(){const e={handleAction:this.props.restartAction,text:"Try Again"};return this.renderModal("You Won",e)}renderWall(){const e=this.props,t=e.moveTo,a=(e.restartAction,t(Object(W.a)(e,["moveTo","restartAction"]))),r=[{action:a("bottom"),shortcut:"arrow-down"},{action:a("left"),shortcut:"arrow-left"},{action:a("right"),shortcut:"arrow-right"},{action:a("top"),shortcut:"arrow-up"}];return n.a.createElement(Z,{moveTo:a},n.a.createElement(q,{shortcuts:r,targetSelector:"body"},n.a.createElement("div",{className:"App no-select"},n.a.createElement(ue,null),n.a.createElement("main",{className:"main"},n.a.createElement(pe,null)))))}renderWelcome(){return n.a.createElement("div",{className:"App no-select"},n.a.createElement(ue,null),n.a.createElement("main",{className:"main"},n.a.createElement(fe,null)))}render(){switch(this.props.status){case"WELCOME":return this.renderWelcome();case"PLAYING":return this.renderWall();case"PLAYER_LOSE":return this.renderModalLose();case"PLAYER_WON":return this.renderModalWon();default:return this.renderWall()}}}const ye=e=>t=>a=>()=>{if("PLAYING"!==t.status)return;if(Le(t))return e({type:"PLAYER_LOSE"});const r=Object(p.a)({},t);if(r.wall=we(a)(t.wall),(n=t.wall,e=>n.length===e.length&&n.reduce((t,a,r)=>!0===t&&n[r]===e[r],!0))(r.wall))return ve(e);var n;r.score+=Ne(a)(t.wall),r.wall=v(r.wall),e((e=>({payload:e,type:"MOVIMENT"}))(r)),xe(t.maxBlock)(r.wall)&&e({type:"PLAYER_WON"})},Ne=e=>t=>Se(e)(t).reduce((e,t)=>e+t[0]+t[1],0),ve=e=>{e(be(!0)),setTimeout(()=>e(be(!1)),300)},we=e=>t=>{switch(e){case"bottom":return Oe(t);case"left":return ke(t);case"right":return Ae(t);case"top":return Me(t);default:return t}},Oe=e=>N(L,x,e=>e.map(O),e=>e.map(M),e=>e.map(je),x,b)(e),ke=e=>N(L,e=>e.map(O),e=>e.map(A),e=>e.map(Re),b)(e),Ae=e=>N(L,e=>e.map(O),e=>e.map(M),e=>e.map(je),b)(e),Me=e=>N(L,x,e=>e.map(O),e=>e.map(A),e=>e.map(Re),x,b)(e),Se=e=>t=>{const a=h(e)(["top","bottom"])?N(L,x)(t):L(t);return N(e=>e.map(O),e=>e.map(y),b)(a)},Le=e=>{const t=Se("top")(e.wall),a=Se("right")(e.wall);return"PLAYER_LOSE"===e.status||e.rollback<=0&&E(t)&&E(a)&&!h(0)(e.wall)},xe=e=>t=>h(e)(t),je=(Ce=4,e=>t=>{const a=[...t];for(let r=a.length;r<Ce;r+=1)a.unshift(e);return a})(0);var Ce;const Re=(e=>t=>a=>{const r=[...a];for(let n=r.length;n<e;n+=1)r.push(t);return r})(4)(0);var Te=Object(l.b)(e=>({bestScore:e.bestScore,hardMode:e.hardMode,maxBlock:e.maxBlock,rollback:e.rollback,score:e.score,status:e.status,wall:e.wall,welcomeWall:e.welcomeWall}),e=>({moveTo:ye(e),restartAction:()=>e({type:"RESTART"})}))(ge);c.a.render(n.a.createElement(l.a,{store:P},n.a.createElement(Te,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/clone-2048",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/clone-2048","/service-worker.js");s?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):i(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(e)})}}()}],[[15,1,2]]]);
//# sourceMappingURL=main.1401fe92.chunk.js.map